<%
  const snapshot = (typeof order !== "undefined" && order && order.customer_snapshot)
    ? order.customer_snapshot
    : {};
  const accountType = snapshot?.account?.accountType || snapshot?.account?.type || "";
  const isBusiness = accountType === "business";
  const derivedCompanyName =
    snapshot?.business?.companyName ||
    snapshot?.account?.companyName ||
    "";
  const derivedCustomerName = isBusiness
    ? (derivedCompanyName || snapshot?.personal?.fullName || "")
    : (snapshot?.personal?.fullName || derivedCompanyName || "");
  const effectiveCustomerName =
    (typeof customerName !== "undefined" && customerName)
      ? customerName
      : derivedCustomerName;
  const effectiveCompanyName =
    (typeof companyName !== "undefined" && companyName)
      ? companyName
      : derivedCompanyName;
%>

<h2>Payment received</h2>

<p>
  Hi <%= effectiveCustomerName || effectiveCompanyName || "there" %>,
</p>

<p>
  We have received your payment.
  <% if (amount && currency) { %>
    Amount: <strong><%= amount %> <%= currency %></strong>.
  <% } %>
</p>

<% if (orderNumber) { %>
  <p>
    Order reference: <strong><%= orderNumber %></strong>
  </p>
<% } %>


<p style="margin-top: 16px;">
  If you have any questions, send us an email at info@bevgo.co.za or reach us on WhatsApp at 071 619 1616.
</p>

<p style="margin-top: 20px;">
  Cheers,<br/>
  The Bevgo Team
</p>
